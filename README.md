# Ego-Planner-2D-ROS2

[![ROS2](https://img.shields.io/badge/ROS2-Humble%2FIron%2FJazzy-blue.svg)](https://docs.ros.org/)
[![License](https://img.shields.io/badge/License-MIT-green.svg)]()
[![C++](https://img.shields.io/badge/Language-C++17-orange.svg)]()

> **çœŸæ­£çš„åœ°é¢ç§»åŠ¨æœºå™¨äºº 2D è½¨è¿¹ä¼˜åŒ–æ–¹æ¡ˆ**  
> åŸºäºŽæµ™å¤§é«˜é£žå›¢é˜Ÿä¼˜ç§€çš„å¼€æºå·¥ä½œ Ego-Planner è¿›è¡Œæ·±åº¦äºŒæ¬¡å¼€å‘ï¼Œä»Žåº•å±‚ç®—æ³•å±‚é¢è¿›è¡Œäº†çœŸæ­£çš„é™ç»´é‡æž„ï¼Œä½¿å…¶å®Œå…¨é€‚é… 2D å¯¼èˆªåœºæ™¯ã€‚

ðŸ”— **é¡¹ç›®åœ°å€**ï¼š[https://github.com/JackJu-HIT/Ego-Planner-2D-ROS2](https://github.com/JackJu-HIT/Ego-Planner-2D-ROS2)

---

## ðŸ“… æ›´æ–°æ—¥å¿— (Changelog)

### [2025-12-10]
- âœ¨ **æ–°å¢žåŠŸèƒ½**ï¼šæ·»åŠ  GridMap è†¨èƒ€åŽçš„éšœç¢ç‰©å¯è§†åŒ–æ¸²æŸ“ã€‚
  - **Rviz2 ç›‘å¬è¯é¢˜**ï¼š`/visual_local_obstacles`
- ðŸ› **Bug ä¿®å¤**ï¼šä¿®å¤äº† GridMap åœ¨ç‰¹å®šè¾¹ç•Œæ¡ä»¶ä¸‹å­˜åœ¨çš„ Bugã€‚

---

## ðŸš€ é¡¹ç›®ç®€ä»‹ (Introduction)

æœ¬é¡¹ç›®é’ˆå¯¹åœ°é¢ç§»åŠ¨æœºå™¨äººï¼ˆAGV/AMRï¼‰çš„ç‰¹æ€§ï¼Œå¯¹åŽŸæœ‰çš„ Ego-Planner ç®—æ³•è¿›è¡Œäº†æ ¸å¿ƒé‡æž„ã€‚ä¸åŒäºŽç®€å•çš„â€œåŽ‹æ‰â€ä¸‰ç»´è½¨è¿¹ï¼Œæˆ‘ä»¬ä»Ž**ä¼˜åŒ–å™¨åº•å±‚æ•°å­¦æ¨¡åž‹**åˆ°**çŽ¯å¢ƒåœ°å›¾è¡¨è¾¾**è¿›è¡Œäº†å…¨é¢çš„äºŒç»´åŒ–æ”¹é€ ï¼Œå®žçŽ°äº†æ›´é«˜æ•ˆã€æ›´è½»é‡çš„å¹³é¢è½¨è¿¹è§„åˆ’ã€‚

### âœ¨ æ ¸å¿ƒç‰¹æ€§ (Key Features)

#### 1. çœŸæ­£çš„ 2D è½¨è¿¹ä¼˜åŒ– (True 2D Optimization)
é‡æž„äº†è½¨è¿¹ä¼˜åŒ–å™¨çš„æ ¸å¿ƒæ•°å­¦æ¨¡åž‹ï¼Œå°†ä¼˜åŒ–å˜é‡ä»Ž 3 ç»´é™è‡³ 2 ç»´ï¼ˆä»…ä¼˜åŒ– $x, y$ï¼‰ã€‚**å½»åº•ç§»é™¤äº† Z è½´çš„å†—ä½™è®¡ç®—**ï¼Œå®žçŽ°äº†æ•°å­¦æ„ä¹‰ä¸Šçš„å¹³é¢è½¨è¿¹è§„åˆ’ï¼Œæ˜¾è‘—æå‡äº†æ±‚è§£æ•ˆçŽ‡ã€‚

#### 2. çŽ¯å¢ƒå±‚é‡æž„ (Environment Refactoring)
å°†åŽŸæœ‰çš„ 3D çŽ¯å¢ƒè¡¨è¾¾é‡æž„ä¸º **2D GridMapï¼ˆæ …æ ¼åœ°å›¾ï¼‰**ã€‚è¿™ä¸€æ”¹è¿›å¤§å¹…é™ä½Žäº†å†…å­˜å ç”¨ï¼Œå¹¶æ˜¾è‘—æé«˜äº†çŽ¯å¢ƒæŸ¥è¯¢ä¸Žç¢°æ’žæ£€æµ‹çš„è®¡ç®—é€Ÿåº¦ã€‚

#### 3. å¯»è·¯ç®—æ³•é™ç»´ (2D A* Search)
å¯¹ Path Searching æ¨¡å—ä¸­çš„ A* ç®—æ³•è¿›è¡Œäº†é™ç»´é€‚é…ï¼Œä¸“æ³¨äºŽå¹³é¢è·¯å¾„æœç´¢ï¼Œç”Ÿæˆçš„åˆå§‹è·¯å¾„æ›´è´´åˆåœ°é¢ç§»åŠ¨éœ€æ±‚ã€‚

#### 4. çº¯ C++ æ ¸å¿ƒä¸Žè§£è€¦ (Pure C++ Core)
å‰¥ç¦»äº†åŽŸç®—æ³•å¯¹ ROS1 çš„ä¾èµ–ï¼Œæ ¸å¿ƒç®—æ³•é€»è¾‘é‡‡ç”¨**çº¯ C++ å®žçŽ°**ï¼Œæ¨¡å—åŒ–ç¨‹åº¦é«˜ï¼Œå…·æœ‰æžé«˜çš„å¯ç§»æ¤æ€§ï¼Œæ˜“äºŽé›†æˆåˆ°å…¶ä»–ç³»ç»Ÿã€‚

#### 5. å…¨é¢é€‚é… ROS 2 (ROS 2 Support)
é¡¹ç›®é‡‡ç”¨ ROS 2 ä½œä¸ºå¤–å£³å°è£…ï¼Œå®Œå…¨é€‚é… ROS 2 é€šä¿¡æ¡†æž¶ã€‚æ”¯æŒ Rviz2 äº¤äº’å¼ä»¿çœŸï¼Œæä¾›æµç•…çš„å¯è§†åŒ–äº¤äº’ä½“éªŒï¼Œå¼€ç®±å³ç”¨ã€‚

---

## ðŸ› ï¸ ç¼–è¯‘ä¸Žè¿è¡Œ (How to use)

è¯·ç¡®ä¿æ‚¨çš„çŽ¯å¢ƒå·²å®‰è£… ROS 2 åŠç›¸å…³ä¾èµ–ã€‚

### 1. ç¼–è¯‘é¡¹ç›®
```bash
colcon build
source install/setup.bash
```

### 2. è¿è¡Œæ­¥éª¤
1.  **å¯åŠ¨è§„åˆ’èŠ‚ç‚¹**ï¼š
    ```bash
    ros2 run motion_plan motion_plan
    ```
2.  **å¯åŠ¨å¯è§†åŒ–ç•Œé¢**ï¼š
    ```bash
    rviz2
    # å»ºè®®åŠ è½½é¡¹ç›®æä¾›çš„ rviz é…ç½®æ–‡ä»¶ï¼ˆå¦‚æœ‰ï¼‰
    ```
3.  **äº¤äº’æµ‹è¯•**ï¼š
    - åœ¨ Rviz2 ä¸­ä½¿ç”¨ `2D Pose Estimate` è®¾ç½®èµ·ç‚¹ï¼ˆæˆ–ä½¿ç”¨é»˜è®¤èµ·ç‚¹ï¼‰ã€‚
    - ä½¿ç”¨ `2D Nav Goal` è®¾ç½®å…¨å±€ç›®æ ‡ç‚¹ã€‚
    - ä½¿ç”¨ `Publish Point` å·¥å…·æ·»åŠ æ¨¡æ‹Ÿéšœç¢ç‰©ã€‚
    - è§‚å¯Ÿè¯é¢˜ `visual_local_obstacles` æŸ¥çœ‹è†¨èƒ€åŽçš„éšœç¢ç‰©ä¿¡æ¯ã€‚

---

## ðŸ”— å‚è€ƒä¸Žè‡´è°¢ (References)

æœ¬é¡¹ç›®æ ¸å¿ƒç®—æ³•æºè‡ª **ZJU-FAST-Lab** å›¢é˜Ÿçš„ä¼˜ç§€å¼€æºå·¥ä½œï¼Œç‰¹æ­¤æ„Ÿè°¢ã€‚

*   **Original Project**: [ZJU-FAST-Lab/ego-planner](https://github.com/ZJU-FAST-Lab/ego-planner)

---

## ðŸ“¢ æ›´å¤šä¿¡æ¯ (More Info)

å¦‚æžœæ‚¨å¯¹è½¨è¿¹ä¼˜åŒ–ä¸Žè¿åŠ¨æŽ§åˆ¶æ„Ÿå…´è¶£ï¼Œæ¬¢è¿Žå…³æ³¨æˆ‘çš„åª’ä½“æ¸ é“èŽ·å–æ›´å¤šæŠ€æœ¯åˆ†äº«ï¼š

*   **å¾®ä¿¡å…¬ä¼—å·**ï¼š`æœºå™¨äººè§„åˆ’ä¸ŽæŽ§åˆ¶ç ”ç©¶æ‰€`
    *   [ç‚¹å‡»é˜…è¯»ç›¸å…³æŠ€æœ¯æ–‡ç« ](https://mp.weixin.qq.com/s/tjHMyyEMzsonYaVbrq4WTQ)
    *   *å¦‚éœ€åŠ å…¥äº¤æµç¾¤ï¼Œè¯·é€šè¿‡å…¬ä¼—å·åŽå°è”ç³»æˆ‘ã€‚*
*   **Bilibili**ï¼š`æœºå™¨äººç®—æ³•ç ”ç©¶æ‰€`
    *   [è§‚çœ‹æ¼”ç¤ºè§†é¢‘](https://www.bilibili.com/video/BV11RUfB8ELb/)

---

## âš ï¸ å…è´£å£°æ˜Ž (Disclaimer)

1.  æœ¬é¡¹ç›®å±žäºŽæœ¬äºº (**JackJu**) åœ¨ä¸šä½™æ—¶é—´è¿›è¡Œçš„ä¸ªäººå­¦ä¹ ä¸ŽæŠ€æœ¯ç ”ç©¶æˆæžœã€‚
2.  é¡¹ç›®ä»£ç **æœªåº”ç”¨**äºŽä»»ä½•å…¬å¸ã€æœºæž„æˆ–å•†ä¸šå›¢é˜Ÿçš„å®žé™…é¡¹ç›®ä¸­ã€‚
3.  é¡¹ç›®ä»…ä¾›**å­¦æœ¯äº¤æµä¸Žå­¦ä¹ ä½¿ç”¨**ï¼Œä¸æ¶‰åŠä»»ä½•å•†ä¸šåˆ©ç›Šå†²çªæˆ–ä¾µæƒè¡Œä¸ºã€‚
4.  å¦‚æžœæ‚¨ä½¿ç”¨æ­¤ 2D ego-planner è¿›è¡ŒäºŒæ¬¡å¼€å‘æˆ–å‘è¡¨å­¦æœ¯è®ºæ–‡ï¼Œ**è¯·å¼•ç”¨æœ¬ Git ä»“åº“é“¾æŽ¥**ï¼š
    > https://github.com/JackJu-HIT/Ego-Planner-2D-ROS2

---
*Last updated: 2025-12-30*
